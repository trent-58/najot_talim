{% extends "shop/base.html" %}
{% block title %}Products · SimpleShop{% endblock %}
{% block content %}
<h1>Products</h1>

<p>
  <a href="{% url 'shop:product_create' %}">+ Create Product</a>
  | <a href="{% url 'shop:home' %}">Home</a>
</p>

{% if products %}
  <div class="grid">
    {% for p in products %}
      <div class="card">
        {% if p.image %}
          <img src="{{ p.image.url }}" alt="{{ p.name }}">
        {% else %}
          <img src="" alt="No image">
        {% endif %}
        <div class="p">
          <div><strong><a href="{% url 'shop:product_detail' p.pk %}">{{ p.name }}</a></strong></div>
          <div class="price">${{ p.price }}</div>
          <div><small>Category: <a href="{% url 'shop:category_detail' p.category.pk %}">{{ p.category.name }}</a></small></div>
          <div style="margin-top:6px">
            <a href="{% url 'shop:product_edit' p.pk %}">Edit</a>
            · <a href="{% url 'shop:product_delete' p.pk %}">Delete</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>No products yet.</p>
{% endif %}

{% if is_paginated %}
  <p>
    {% if page_obj.has_previous %}
      <a href="?page={{ page_obj.previous_page_number }}">Previous</a>
    {% endif %}
    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}">Next</a>
    {% endif %}
  </p>
{% endif %}
{% endblock %}
